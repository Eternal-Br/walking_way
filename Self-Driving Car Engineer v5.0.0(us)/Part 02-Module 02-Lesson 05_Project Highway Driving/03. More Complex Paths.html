<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   More Complex Paths
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Project: Highway Driving
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Planning is Hard.html">
       01. Planning is Hard
      </a>
     </li>
     <li class="">
      <a href="02. Getting Started.html">
       02. Getting Started
      </a>
     </li>
     <li class="">
      <a href="03. More Complex Paths.html">
       03. More Complex Paths
      </a>
     </li>
     <li class="">
      <a href="04. Highway Map.html">
       04. Highway Map
      </a>
     </li>
     <li class="">
      <a href="05. Sensor Fusion.html">
       05. Sensor Fusion
      </a>
     </li>
     <li class="">
      <a href="06. Project Q&amp;A.html">
       06. Project Q&amp;A
      </a>
     </li>
     <li class="">
      <a href="07. Project instructions.html">
       07. Project instructions
      </a>
     </li>
     <li class="">
      <a href="08. Workspaces Highway Driving.html">
       08. Workspaces: Highway Driving
      </a>
     </li>
     <li class="">
      <a href="09. Share Your Success - Highway Driving.html">
       09. Share Your Success - Highway Driving
      </a>
     </li>
     <li class="">
      <a href="Project Description - Highway Driving.html">
       Project Description - Highway Driving
      </a>
     </li>
     <li class="">
      <a href="Project Rubric - Highway Driving.html">
       Project Rubric - Highway Driving
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          03. More Complex Paths
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h3 id="more-complex-paths">
          More Complex Paths
         </h3>
         <p>
          In the previous concept you moved the car forward in a straight line. How about creating more interesting paths?
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="Driving the car in a circular path" class="img img-fluid" src="img/circle-path.gif"/>
          <figcaption class="figure-caption">
           <p>
            Driving the car in a circular path
           </p>
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          ```cpp
          <br/>
          vector
          <double>
           next_x_vals;
           <br/>
           vector
           <double>
            next_y_vals;
           </double>
          </double>
         </p>
         <p>
          double pos_x;
          <br/>
          double pos_y;
          <br/>
          double angle;
          <br/>
          int path_size = previous_path_x.size();
         </p>
         <p>
          for (int i = 0; i &lt; path_size; ++i) {
          <br/>
          next_x_vals.push_back(previous_path_x[i]);
          <br/>
          next_y_vals.push_back(previous_path_y[i]);
          <br/>
          }
         </p>
         <p>
          if (path_size == 0) {
          <br/>
          pos_x = car_x;
          <br/>
          pos_y = car_y;
          <br/>
          angle = deg2rad(car_yaw);
          <br/>
          } else {
          <br/>
          pos_x = previous_path_x[path_size-1];
          <br/>
          pos_y = previous_path_y[path_size-1];
         </p>
         <p>
          double pos_x2 = previous_path_x[path_size-2];
          <br/>
          double pos_y2 = previous_path_y[path_size-2];
          <br/>
          angle = atan2(pos_y-pos_y2,pos_x-pos_x2);
          <br/>
          }
         </p>
         <p>
          double dist_inc = 0.5;
          <br/>
          for (int i = 0; i &lt; 50-path_size; ++i) {
          <br/>
          next_x_vals.push_back(pos_x+(dist_inc)
          <em>
           cos(angle+(i+1)
          </em>
          (pi()/100)));
          <br/>
          next_y_vals.push_back(pos_y+(dist_inc)
          <em>
           sin(angle+(i+1)
          </em>
          (pi()/100)));
          <br/>
          pos_x += (dist_inc)
          <em>
           cos(angle+(i+1)
          </em>
          (pi()/100));
          <br/>
          pos_y += (dist_inc)
          <em>
           sin(angle+(i+1)
          </em>
          (pi()/100));
          <br/>
          }
         </p>
         <p>
          msgJson["next_x"] = next_x_vals;
          <br/>
          msgJson["next_y"] = next_y_vals;
          <br/>
          ```
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h3 id="using-previous-path-points">
          Using Previous Path Points
         </h3>
         <p>
          The code snippet above builds a 50 point path, as in the previous experiment. But this code snippet starts the new path with whatever previous path points were left over from the last cycle. Then we append new waypoints, until the new path has 50 total waypoints.
         </p>
         <p>
          Using information from the previous path ensures that there is a smooth transition from cycle to cycle. But the more waypoints we use from the previous path, the less the new path will reflect dynamic changes in the environment.
         </p>
         <p>
          Ideally, we might only use a few waypoints from the previous path and then generate the rest of the new path based on new data from the car's sensor fusion information.
         </p>
         <h3 id="timing">
          Timing
         </h3>
         <p>
          The simulator runs a cycle every 20 ms (50 frames per second), but your C++ path planning program will provide a new path at least one 20 ms cycle behind. The simulator will simply keep progressing down its last given path while it waits for a new generated path.
         </p>
         <p>
          This means that using previous path data becomes even more important when higher latency is involved. Imagine, for instance, that there is a 500ms delay in sending a new path to the simulator. As long as the new path incorporates a sufficient length of the previous path, the transition will still be smooth.
         </p>
         <p>
          A concern, though, is how accurately we can predict other traffic 1-2 seconds into the future. An advantage of newly generated paths is that they take into account the most up-to-date state of other traffic.
         </p>
         <h3 id="setting-point-paths-with-latency">
          Setting Point Paths with Latency
         </h3>
         <p>
          As a mentioned, your C++ path planner will at the very least be one cycle behind the simulator because the C++ program can't receive and send data on the same cycle. As a result, any path that the simulator receives will be from the perspective of a previous cycle. This might mean that by the time a new path reaches the simulator, the vehicle has already passed the first few waypoints on that path.
         </p>
         <p>
          Luckily you don't have to worry about this too much. The simulator has built-in tools to deal with this timing difference. The simulator actually expects the received path to be a little out of date compared to where the car is, and the simulator will consider which point on the received path is closest to the car and adjust appropriately.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="04. Highway Map.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('03. More Complex Paths')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
